# 脚本语言的基本概念相关

1.JavaScript解释型语言会经过以下几个步骤:
- 源代码===>
  - 预解释(读入代码块->语法分析->声明预处理->定义赋值)
    - ===>执行(继续运行下一个代码块)
      - ===>结束

- 分词/词法分析: 将一连串字符打断成有意义的片段，称为 token.   
- 解析: 将 token 的流 (数组) 转换为一个嵌套元素的树，综合地表示程序语言结构，这棵树称为 “抽象语法树” (AST)  
- 代码生成: 将这个抽象语法树转换为可执行的代码. 生成的可执行代码根椐目标平台，而有不同JavaScript引擎是严格按着作用域机制（scope）来执行的。
  
  JavaScript语法采用的是词法作用域 （lexcical scope），也就是说JavaScript的变量和函数作用域是在定义时决定的，而不是执行时决定的，由于词法作用域取决于源代码结构，所以JavaScript解释器只需要通过静态分析就能确定每个变量、函数的作用域，这种作用域也称为静态作用域（static scope）。
   
  JavaScript引擎通过作用域链（scope chain）把多个嵌套的作用域串连在一起，并借助这个链条帮助JavaScript解释器检索变量的值。这个作用域链相当于一个索引表，并通过编号来存 储它们的嵌套关系。当JavaScript解释器检索变量的值，会按着这个索引编号进行快速查找，直到找到全局对象（global object）为止，如果没有找到值，则传递一个特殊的undefined值。

  如果函数引用了外部变量的值，则JavaScript引擎会为该函数创建一个闭包体（closure），闭包体是一个完全封闭和独立的作用域，它不会在函数调用完毕后就
JavaScript引擎当做垃圾进行回收。闭包体可以长期存在，因此开发人员常把闭包体当做内存中的蓄水池，专门用来长期保存变量的值。只有当闭包体的外部引用被全部设置为null值时，该闭包才会被回收。当然，也容易引发垃圾泛滥，甚至出现内存外溢的现象。


# 编译型语言和解释性语言
- c++
  >编译器把代码编译成中间文件.0或者是.obj  
  通过连接器和汇编器，生成机器码。  也就是最终可以直接执行的EXE文件。  

- 解释性语言:
  >将源码生成中间序列，丢给对应的语言虚拟机执行。 解释性语言可以直接运行。  

- JAVA
  >编译器器javac把源码变成字节码，解释器Java.exe把字节码转换成机器码执行。    
  编译器和解释器都是JVM的一部分，针对不同硬件与OS，java解释器会有所不同，做到一次      
  编译到处执行。JVM包含一套字节码指令集，一组寄存器，一个栈，一个垃圾回收堆，一个存储方法域。

- Python
  >也是类似，源代码→字节码→机器码。python的虚拟机是用其他语言实现的，常见的是Cpython。    
  虚拟机复则编译成字节码在解释执行，另外还有Jyoython、Ironpyhon等。

# 字节码和机器码
- 字节码和机器码的（native code）区别  
  >C代码被编译成机器码，将在处理器上直接执行。每一条指令直接控制CPU工作。  
  Java代码被编译成字节码，将在Java虚拟机（JVM）这个抽象的计算机上执行。每一条指令    
  由JVM处理，JVM同计算机本身之间交互。简尔言之，机器码快的多，但字节码更易迁移，也更加安全。  


# JIT
- Java-JIT
  >Java-JIT 通过把字节码直接编译成本地机器码去运行，如果编译消耗的时间，可以让最终
  运行效果获得提升，这个编译的代价就是值得的。这就是JIT的动机，通用的方法就是
  标记经常被执行的字节码，编译成机器码。缓存结果，相同字节码到来时，直接取预编译
  的机器码，加快执行速度。  

- Python -JIT
  >Pypy 里面也引入JIT到python，pypy本身目标是成为一个跨平台，轻内存，支持stackless（微线程，具有并发特性)
  及时编译才是其最大的特定，据说可以提高运行速度6.27倍。  
